name: "Balto - TypeScript"
description: "Run TypeScript checks on your repo"
runs:
  using: composite
  steps:
    - uses: actions/checkout@v3
      with:
        fetch-depth: 0
    - uses: actions/setup-node@v2
      with:
        node-version: '14'
        cache: 'yarn'
    - name: Cache node_modules
      id: cache-node-modules
      uses: actions/cache@v3
      with:
        path: node_modules
        key: ${{ runner.os }}-${{ matrix.node-version }}-nodemodules-${{ hashFiles('**/yarn.lock') }}
        restore-keys: |
            ${{ runner.os }}-${{ matrix.node-version }}-nodemodules-
    - run: yarn install --frozen-lockfile --prefer-offline --immutable
      shell: bash
    - uses: planningcenter/balto-typescript/action@composite
      with:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        conclusionLevel: ${{inputs.conclusion_level}}
branding:
  icon: life-buoy
  color: orange
inputs:
  conclusionLevel:
    description: 'Which check run conclusion type to use when annotations are created ("neutral" or "failure" are most common)'
    required: false
    default: "neutral"
outputs:
  issuesCount:
    description: "Number of eslint violations found"
